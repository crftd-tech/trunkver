<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>trunkVer</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="prism.css" />
  </head>
  <body>
    <div class="content">
      <h1><span class="logo">trunkVer</span></h1>
<p>so we can stop talking about versions and start shipping.</p>
<div class="spacer"></div>
<div class="hero">
  <div class="hero-grid">
    <div class="version timestamp">0.0.0</div>
    <div class="version grid-spacer">-</div>
    <div class="version source-ref">
      <a href="https://github.com/crftd-tech/trunkver/commit/HEAD"
        >HEAD</a
      >
    </div>
    <div class="version grid-spacer">-</div>
    <div class="version build-ref">
      <a
        href="https://github.com/crftd-tech/trunkver/actions/runs/local/attempts/local"
        >local</a
      >
    </div>
    <div class="description timestamp">When it was built</div>
    <div class="description grid-spacer">&nbsp;</div>
    <div class="description source-ref">What was built</div>
    <div class="description grid-spacer">&nbsp;</div>
    <div class="description build-ref">How it was built</div>
    <div class="code timestamp">date -u +%Y%m%d%H%M%S</div>
    <div class="code grid-spacer">&nbsp;</div>
    <div class="code source-ref">git rev-parse --short HEAD</div>
    <div class="code grid-spacer">&nbsp;</div>
    <div class="code build-ref">${CI_JOB_ID}</div>
  </div>
</div>
<h2>TL;DR</h2>
<p><code>trunkVer</code> is a semVer-compatible versioning scheme for
trunk-based applications and systems that don't follow a release scheme.</p>
<p>It removes the chore of manually bumping version numbers and instead
enriches the version number with three important data points: The
<strong>when</strong>, <strong>what</strong> and <strong>how</strong>.</p>
<h2>Usage</h2>
<h3>GitHub Actions</h3>
<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Generate trunkver
  <span class="token key atrule">id</span><span class="token punctuation">:</span> trunkver
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> crftd<span class="token punctuation">-</span>tech/trunkver@main

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Print trunkver
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">TRUNKVER</span><span class="token punctuation">:</span> $
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    echo "$TRUNKVER"</span></code></pre>
<h3>Docker</h3>
<pre class="language-sh"><code class="language-sh"><span class="token function">docker</span> run ghcr.io/crftd-tech/trunkver:latest --build-ref <span class="token string">"<span class="token variable">$CI_JOB_ID</span>"</span> --source-ref <span class="token string">"g<span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> rev-parse <span class="token parameter variable">--short</span> HEAD<span class="token variable">)</span></span>"</span></code></pre>
<h3>Other CIs</h3>
<pre class="language-sh"><code class="language-sh"><span class="token function">curl</span> <span class="token parameter variable">-sSL</span> https://github.com/crftd-tech/trunkver/releases/latest/download/trunkver_linux_amd64 <span class="token parameter variable">-o</span> trunkver
<span class="token function">chmod</span> +x trunkver
./trunkver</code></pre>
<h2>FAQ</h2>
<ul>
<li>
<p><strong>Why only use the MAJOR semVer part as a timestamp?</strong><br>
Tools (e.g. compliance, audit trails) might still classify a version based on semVer semantics, hence trunkVer always defensively implies breaking changes between versions.</p>
</li>
<li>
<p><strong>Why do you use the PRERELEASE semVer part for source information and not build?</strong><br>
Because OCI tags don't support <code>+</code> (see <a href="https://github.com/distribution/distribution/issues/1201">distribution/distribution#1201</a> and <a href="https://github.com/opencontainers/distribution-spec/issues/154">opencontainers/distribution-spec#154</a>. We'd rather have one consistent version across artifacts. Semantically, the only relevant portion for sorting of a trunkVer is
the MAJOR version, and a conflict (as in creating two artifacts in the
very same second) should be avoided.</p>
</li>
</ul>
<h2>Links</h2>
<ul>
<li><a href="https://github.com/crftd-tech/trunkver">https://github.com/crftd-tech/trunkver</a></li>
<li><a href="https://crftd.tech/">https://crftd.tech/</a></li>
</ul>

      <div class="spacer"></div>
      <footer>
        Made with ðŸ§¡ for people &amp; tech, and disregard for busy-work by
        <a href="https://crftd.tech">crafted. tech collective</a>.
        <br/><small><code>Version: 0.0.0-HEAD-local</code></small>
      </footer>
    </div>
  </body>
</html>
